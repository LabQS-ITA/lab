services:

  nextcloud:
    container_name: nextcloud
    image: nextcloud:latest
    restart: unless-stopped
    ports:
      - '8083:80'
    networks:
      netlab01:
        ipv4_address: ${NEXTCLOUD_HOST}
    volumes:
      - nextclouddata:/var/www/html
      - ${PWD}/apps:/var/www/html/custom_apps
      - ${PWD}/config:/var/www/html/config
      - ${PWD}/themes:/var/www/html/themes
    environment:
      - POSTGRES_DB=nextcloud
      - POSTGRES_USER=nextcloud
      - POSTGRES_PASSWORD=${POSTGRES_PWD}
      - POSTGRES_HOST=${POSTGRES_HOST}
      - NEXTCLOUD_ADMIN_USER=nextcloud
      - NEXTCLOUD_ADMIN_PASSWORD=${POSTGRES_PWD}

volumes:
  nextclouddata:
    name: nextclouddata
    driver: local
